{% extends 'base.html' %}

{% block title %}Admin Panel{% endblock %}

{% block content %}
<h2>Admin Panel</h2>

<hr>
<h4>Add New Question</h4>
<form method="POST">
    <div class="mb-2">
        <input class="form-control" type="text" name="question_text" placeholder="Question Text" required>
    </div>
    <div class="mb-2">
        <input class="form-control" type="text" name="choice1" placeholder="Choice 1" required>
    </div>
    <div class="mb-2">
        <input class="form-control" type="text" name="choice2" placeholder="Choice 2" required>
    </div>
    <div class="mb-2">
        <input class="form-control" type="text" name="choice3" placeholder="Choice 3" required>
    </div>
    <div class="mb-2">
        <input class="form-control" type="text" name="choice4" placeholder="Choice 4" required>
    </div>
    <div class="mb-2">
        <input class="form-control" type="text" name="correct_answer" placeholder="Correct Answer" required>
    </div>
    <button class="btn btn-success" type="submit">Add Question</button>
</form>

<hr>
<h4>All Questions</h4>
<ul class="list-group mb-4">
    {% for question in questions %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ question.question_text }}
        <span>
            <a href="{{ url_for('edit_question', question_id=question.id) }}" class="btn btn-sm btn-warning">Edit</a>
            <a href="{{ url_for('delete_question', question_id=question.id) }}" class="btn btn-sm btn-danger">Delete</a>
        </span>
    </li>
    {% endfor %}
</ul>

<hr>
<h4>Manage Users</h4>
<ul class="list-group">
    {% for user in users %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ user.username }} ({{ user.display_name }})
        {% if not user.is_admin %}
        <span>
            <a href="{{ url_for('delete_user', user_id=user.id) }}" class="btn btn-sm btn-danger">Delete</a>
            <form action="{{ url_for('reset_password', user_id=user.id) }}" method="POST" style="display:inline;">
                <input class="form-control form-control-sm d-inline-block w-auto" type="text" name="new_password" placeholder="New password" required>
                <button class="btn btn-sm btn-primary">Reset</button>
            </form>
        </span>
        {% else %}
            (Admin)
        {% endif %}
    </li>
    {% endfor %}
</ul>

{% endblock %}
